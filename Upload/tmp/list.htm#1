<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title langtag="title-admin"></title>

    
    
    <link href="/static/css/fontawesome.min.css" rel="stylesheet">
    <link href="/static/css/solid.min.css" rel="stylesheet">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/bootstrap-table.min.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">

    
    <script src="/static/js/jquery-3.4.1.min.js"></script>
    <script src="/static/js/popper.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/bootstrap-table.min.js"></script>
    <script src="/static/js/bootstrap-table-locale-all.min.js"></script>
    <script src="/static/js/echarts.min.js"></script>
    <script src="/static/js/inspinia.js"></script>
    
    <script src="/static/js/language.js" type="text/javascript"></script>

</head>

<body class="pace-done fixed-nav fixed-nav-basic">
<div id="wrapper">
    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav metismenu" id="side-menu">
                <li class="nav-header">
                    <div class="dropdown profile-element">
                    
                        <span><i class="fa fa-user-cog fa-3x"></i></span>
                        <span class="clear"> <span class="block m-t-xs"><strong class="font-bold" langtag="word-admin"></strong></span>
                        <span class="text-muted text-xs block" langtag="word-system">
                    
                        </span>
                    </div>
                    <div class="logo-element" langtag="application"></div>
                </li>
                <li class="">
                    <a href="/"><i class="fa fa-tachometer-alt fa-lg"></i>
                    <span class="nav-label" langtag="word-dashboard"></span></a>
                </li>
                <li class="active">
                    <a href="/client/list"><i class="fa fa-desktop fa-lg"></i>
                    <span class="nav-label" langtag="word-client"></span></a>
                </li>
                <li class="">
                    <a href="/index/hostlist"><i class="fa fa-globe fa-lg"></i>
                    <span class="nav-label" langtag="scheme-host"></span></a>
                </li>
                <li class="">
                    <a href="/index/tcp"><i class="fa fa-retweet fa-lg"></i>
                    <span class="nav-label" langtag="scheme-tcp"></span></a>
                </li>
                <li class="">
                    <a href="/index/udp"><i class="fa fa-random fa-lg"></i>
                    <span class="nav-label" langtag="scheme-udp"></span></a>
                </li>
                <li class="">
                    <a href="/index/http"><i class="fa fa-server fa-lg"></i>
                    <span class="nav-label" langtag="scheme-httpproxy"></span></a>
                </li>
                <li class="">
                    <a href="/index/socks5"><i class="fa fa-layer-group fa-lg"></i>
                    <span class="nav-label" langtag="scheme-socks5"></span></a>
                </li>
                <li class="">
                    <a href="/index/secret"><i class="fa fa-low-vision fa-lg"></i>
                    <span class="nav-label" langtag="scheme-secret"></span></a>
                </li>
                <li class="">
                    <a href="/index/p2p"><i class="fa fa-exchange-alt fa-lg"></i>
                    <span class="nav-label" langtag="scheme-p2p"></span></a>
                </li>
                <li class="">
                    <a href="/index/file"><i class="fa fa-briefcase fa-lg"></i>
                    <span class="nav-label" langtag="scheme-file"></span></a>
                </li>
                <li class="">
                    <a href="https://ehang.io/nps/documents" target="_blank"><i class="fa fa-lightbulb fa-lg"></i>
                    <span class="nav-label" langtag="word-help"></span></a>
                </li>
            </ul>
        </div>
    </nav>
    <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom">
            <nav class="navbar white-bg navbar-fixed-top" role="navigation" style="margin-bottom: 0">

                <div class="navbar-header">
                    <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i></a>
                </div>
                <ul class="nav navbar-top-links navbar-right">
                    <li>
                        <span class="m-r-sm text-muted welcome-message"><span langtag="word-welcome"></span>
                        <a href="https://ehang.io/nps" langtag="application"></a></span>
                    </li>
                    <li>
                        <span class="btn-group dropdown">
                            <button id="languagemenu" class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-globe-asia fa-lg"></i><span></span></button>
                            <ul class="dropdown-menu"></ul>
                        </span>
                    </li>
                    <li>
                        <a href="/login/out">
                            <i class="fa fa-sign-in-alt"></i><span langtag="word-logout"></span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

    <div class="wrapper wrapper-content animated fadeInRight">

    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5 langtag="page-clientlist"></h5>

                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
            <div class="content">
            

                <div class="table-responsive">
                    <div id="toolbar">
                        <a href="/client/add" class="btn btn-primary dim">
                        <i class="fa fa-fw fa-lg fa-plus"></i> <span langtag="word-add"></span></a>
                    </div>
                    <table id="taskList_table" class="table-striped table-hover" data-mobile-responsive="true"></table>
                </div>
            </div>
            
                <div class="ibox-content">

                    <table id="table"></table>

                </div>
            </div>
        </div>
    </div>
</div>

<script>
     
    $('#table').bootstrapTable({
        toolbar: "#toolbar",
        method: 'post', 
        url: "/client/list", 
        contentType: "application/x-www-form-urlencoded",
        striped: true, 
        search: true,
        showHeader: true,
        showColumns: true,
        showRefresh: true,
        pagination: true,
        sidePagination: 'server',
        pageNumber: 1,
        pageList: [5, 10, 20, 50],
        detailView: true,
        smartDisplay: true, 
        onExpandRow: function () {$('body').setLang ('.detail-view');},
        onPostBody: function (data) { if ($(this)[0].locale != undefined ) $('body').setLang ('#table'); },
        detailFormatter: function (index, row, element) {
            return '<b langtag="word-maxconnections"></b>: ' + row.MaxConn + '&emsp;'
                + '<b langtag="word-curconnections"></b>: ' + row.NowConn + '&emsp;'
                + '<b langtag="word-flowlimit"></b>: ' + row.Flow.FlowLimit + 'm&emsp;'
                + '<b langtag="word-ratelimit"></b>: ' + row.RateLimit + 'kb/s&emsp;'
                + '<b langtag="word-maxtunnels"></b>: ' + row.MaxTunnelNum + '&emsp;<br/><br/>'
                + '<b langtag="word-webusername"></b>: ' + row.WebUserName + '&emsp;'
                + '<b langtag="word-webpassword"></b>: ' + row.WebPassword + '&emsp;'
                + '<b langtag="word-basicusername"></b>: ' + row.Cnf.U + '&emsp;'
                + '<b langtag="word-basicpassword"></b>: ' + row.Cnf.P + '&emsp;<br/><br/>'
                + '<b langtag="word-crypt"></b>: <span langtag="word-' + row.Cnf.Crypt + '"></span>&emsp;'
                + '<b langtag="word-compress"></b>: <span langtag="word-' + row.Cnf.Compress + '"></span>&emsp;'
                + '<b langtag="word-connectbyconfig"></b>: <span langtag="word-' + row.ConfigConnAllow + '"></span>&emsp;<br/><br/>'
                + '<b langtag="word-commandclient"></b>: ' + "<code>./npc -server=hk1.vper.fun:8024 -vkey=" + row.VerifyKey + " -type=" +"tcp" +"</code>"
        },
        
        columns: [
            {
                field: 'Id',
                title: '<span langtag="word-id"></span>',
                halign: 'center',
                visible: true
            },
            {
                field: 'Remark',
                title: '<span langtag="word-remark"></span>',
                halign: 'center',
                visible: true
            },
            {
                field: 'Version',
                title: '<span langtag="word-version"></span>',
                halign: 'center',
                visible: true
            },
            {
                field: 'VerifyKey',
                title: '<span langtag="word-verifykey"></span>',
                halign: 'center',
                visible: true,
                formatter: function (value, row, index) {
                    if (!row.NoStore) {
                        return value
                    } else {
                        return '<span langtag="word-publicvkey"></span>'
                    }
                }
            },
            {
                field: 'Addr',
                title: '<span langtag="word-address"></span>',
                halign: 'center',
                visible: true
            },
            {
                field: 'InletFlow',
                title: '<span langtag="word-inletflow"></span>',
                halign: 'center',
                visible: true,
                sortable: true,
                formatter: function (value, row, index) {
                    return changeunit(row.Flow.InletFlow)
                }
            },
            {
                field: 'ExportFlow',
                title: '<span langtag="word-exportflow"></span>',
                halign: 'center',
                visible: true,
                sortable: true,
                formatter: function (value, row, index) {
                    return changeunit(row.Flow.ExportFlow)
                }
            },
            {
                field: 'IsConnect',
                title: '<span langtag="word-speed"></span>',
                halign: 'center',
                visible: true,
                formatter: function (value, row, index) {
                    return changeunit(row.Rate.NowRate) + "/S"
                }
            },
            {
                field: 'Status',
                title: '<span langtag="word-status"></span>',
                align: 'center',
                halign: 'center',
                visible: true,
                formatter: function (value, row, index) {
                    if (value) {
                        return '<span class="badge badge-primary" langtag="word-open"></span>'
                    } else {
                        return '<span class="badge badge-badge" langtag="word-close"></span>'
                    }
                }
            },
            {
                field: 'IsConnect',
                title: '<span langtag="word-connect"></span>',
                align: 'center',
                halign: 'center',
                visible: true,
                formatter: function (value, row, index) {
                    if (value) {
                        return '<span class="badge badge-primary" langtag="word-online"></span>'
                    } else {
                        return '<span class="badge badge-badge" langtag="word-offline"></span>'
                    }
                }
            },
            {
                field: 'option',
                title: '<span langtag="word-option"></span>',
                align: 'center',
                halign: 'center',
                visible: true,
                formatter: function (value, row, index) {
                    btn_group = '<div class="btn-group">'

                    
                    if (row.Status) {
                        btn_group += '<a onclick="submitform(\'stop\', \'/client/changestatus\', {\'id\':' + row.Id
                        btn_group += ', \'status\': 0})" class="btn btn-outline btn-warning"><i class="fa fa-pause"></i></a>'
                    } else {
                        btn_group += '<a onclick="submitform(\'start\', \'/client/changestatus\', {\'id\':' + row.Id
                        btn_group += ', \'status\': 1})" class="btn btn-outline btn-primary"><i class="fa fa-play"></i></a>'
                    }
                    btn_group += '<a onclick="submitform(\'delete\', \'/client/del\', {\'id\':' + row.Id
                    btn_group += '})" class="btn btn-outline btn-danger"><i class="fa fa-trash"></i></a>'
                    

                    btn_group += '<a href="/client/edit?id=' + row.Id
                    btn_group += '" class="btn btn-outline btn-success"><i class="fa fa-edit"></i></a></div>'
                    return btn_group
                }
            },
            {
                field: 'show',
                title: '<span langtag="word-show">',
                align: 'center',
                halign: 'center',
                visible: true,
                formatter: function (value, row, index) {
                    return '<div class="btn-group"><a href="/index/all?client_id=' + row.Id
                        + '" class="btn btn-outline btn-primary" langtag="word-tunnel"></a>'
                        + '<a href="/index/hostlist?client_id=' + row.Id
                        + '" class="btn btn-outline btn-success" langtag="word-host"></a></div>'
                }
            }
        ]
    });
</script>


        <div class="footer fixed">
            <div class="float-right">
                <span langtag="word-readmore"></span> <strong><a href="https://ehang.io/nps" langtag="word-go"></a></strong>
            </div>
            <div><strong langtag="word-copyright"></strong> <span langtag="application"></span> &copy; 2018-2020</div>
        </div>
    </div>
</div>

</body>
</html>

<script>
    window.nps = { "web_base_url": "" }


</script>


